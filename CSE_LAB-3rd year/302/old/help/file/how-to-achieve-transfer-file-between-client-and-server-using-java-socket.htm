<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><script src="how-to-achieve-transfer-file-between-client-and-server-using-java-socket_files/adzerk1_2_4_43adzerk2_2_17_45.js" async="" type="text/javascript"></script><script src="how-to-achieve-transfer-file-between-client-and-server-using-java-socket_files/ga.js" async="" type="text/javascript"></script><script src="how-to-achieve-transfer-file-between-client-and-server-using-java-socket_files/quant.js" async="" type="text/javascript"></script><script src="how-to-achieve-transfer-file-between-client-and-server-using-java-socket_files/bmi.js" language="javascript"></script><script>window.serq=[];StackExchange={ready:function(f){serq.push(f)}}</script> <title>how to achieve transfer file between client and server using java socket - Stack Overflow</title> <link rel="shortcut icon" href="http://cdn.sstatic.net/stackoverflow/img/favicon.ico"><link rel="apple-touch-icon" href="http://cdn.sstatic.net/stackoverflow/img/apple-touch-icon.png"><link rel="search" type="application/opensearchdescription+xml" title="Stack Overflow" href="http://stackoverflow.com/opensearch.xml"><link rel="stylesheet" type="text/css" href="how-to-achieve-transfer-file-between-client-and-server-using-java-socket_files/all.css"><meta name="relativepagescore" content="161487"><link rel="canonical" href="http://stackoverflow.com/questions/4687615/how-to-achieve-transfer-file-between-client-and-server-using-java-socket"><link rel="alternate" type="application/atom+xml" title="Feed for question 'how to achieve transfer file between client and server using java socket'" href="http://stackoverflow.com/feeds/question/4687615"><script src="how-to-achieve-transfer-file-between-client-and-server-using-java-socket_files/full-anon.js" type="text/javascript" async=""></script><script src="how-to-achieve-transfer-file-between-client-and-server-using-java-socket_files/prettify-full.js" type="text/javascript" async=""></script></head><body class="question-page"><noscript><div id="noscript-padding"></div></noscript><div id="notify-container"></div><div id="overlay-header"></div><div id="custom-header"></div><div class="container"><div id="header"><div id="portalLink"><a class="genu" onclick="StackExchange.ready(function(){genuwine.click();});return false;">Stack Exchange</a></div><div id="topbar"><div id="hlinks"><span id="hlinks-user"></span><span id="hlinks-nav"><a href="http://stackoverflow.com/users/login?returnurl=%2fquestions%2f4687615%2fhow-to-achieve-transfer-file-between-client-and-server-using-java-socket">log in</a> <span class="lsep">|</span> <a href="http://careers.stackoverflow.com/">careers</a> <span class="lsep">|</span> </span><span id="hlinks-custom"><a href="http://chat.stackoverflow.com/">chat</a> <span class="lsep">|</span> <a href="http://meta.stackoverflow.com/">meta</a> <span class="lsep">|</span> <a href="http://stackoverflow.com/about">about</a> <span class="lsep">|</span> <a href="http://stackoverflow.com/faq">faq</a> </span></div><div id="hsearch"><form id="search" action="/search" method="get" autocomplete="off"><div><input autocomplete="off" name="q" class="textbox" placeholder="search" tabindex="1" maxlength="140" size="28" type="text"></div></form></div></div><br class="cbt"><div id="hlogo"><a href="http://stackoverflow.com/">Stack Overflow</a></div><div id="hmenus"><div class="nav mainnavs"><ul><li class="youarehere"><a id="nav-questions" href="http://stackoverflow.com/questions">Questions</a></li> <li><a id="nav-tags" href="http://stackoverflow.com/tags">Tags</a></li> <li><a id="nav-users" href="http://stackoverflow.com/users">Users</a></li> <li><a id="nav-badges" href="http://stackoverflow.com/badges">Badges</a></li> <li><a id="nav-unanswered" href="http://stackoverflow.com/unanswered">Unanswered</a></li></ul></div><div class="nav askquestion"><ul><li><a id="nav-askquestion" href="http://stackoverflow.com/questions/ask">Ask Question</a> </li></ul></div></div></div><div id="content"><div itemscope="" itemtype="http://schema.org/Article"><link itemprop="image" href="http://cdn.sstatic.net/stackoverflow/img/apple-touch-icon.png"><div id="question-header"><h1 itemprop="name"><a href="http://stackoverflow.com/questions/4687615/how-to-achieve-transfer-file-between-client-and-server-using-java-socket" class="question-hyperlink">how to achieve transfer file between client and server using java socket</a></h1></div><div id="mainbar"><div class="question" id="question" data-questionid="4687615"><div class="everyonelovesstackoverflow" id="adzerk1"><a href="http://engine.adzerk.net/redirect/0/5919/7472/8277/7fb9c4fddd4a495bbdc945fd962265d9/43/1178/10184/634764939129326330/?keywords=java%2csockets%2ctcp%2cfile-transfer" rel="nofollow" target="_blank" title=""><img src="how-to-achieve-transfer-file-between-client-and-server-using-java-socket_files/4c4f1be011a447efbce49c1811022e7a.png" title="" alt="" border="0" height="90" width="728"></a></div><table><tbody><tr><td class="votecell"><div class="vote"><input value="4687615" type="hidden"> <a class="vote-up-off" title="This question shows research effort; it is useful and clear (click again to undo)">up vote</a> <span class="vote-count-post">4</span> <a class="vote-down-off" title="This question does not show any research effort; it is unclear or not useful (click again to undo)">down vote</a> <a class="star-off" href="#" title="This is a favorite question (click again to undo)">favorite</a><div class="favoritecount"><b>5</b></div></div></td><td class="postcell"><div><div class="post-text" itemprop="description"><p>I
 have implement the simple TCP server and TCP client classes which can 
send the message from client to server and the message will be converted
 to upper case on the server side, but how can I achieve transfer files 
from server to client and upload files from client to server. the 
following codes are what I have got.</p><p>TCPClient.java</p><pre class="lang-java prettyprint"><code><span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.*;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.*;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Scanner</span><span class="pun">;</span><span class="pln"><br><br>&nbsp;</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">TCPClient</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br><br></span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> args</span><span class="pun">[])</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">Exception</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">int</span><span class="pln"> filesize</span><span class="pun">=</span><span class="lit">6022386</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">int</span><span class="pln"> bytesRead</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">int</span><span class="pln"> current </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">String</span><span class="pln"> ipAdd</span><span class="pun">=</span><span class="str">""</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">int</span><span class="pln"> portNum</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">boolean</span><span class="pln"> goes</span><span class="pun">=</span><span class="kwd">false</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">goes</span><span class="pun">==</span><span class="kwd">false</span><span class="pun">){</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"please input the ip address of the file server"</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Scanner</span><span class="pln"> scan</span><span class="pun">=</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Scanner</span><span class="pun">(</span><span class="typ">System</span><span class="pun">.</span><span class="pln">in</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; ipAdd</span><span class="pun">=</span><span class="pln">scan</span><span class="pun">.</span><span class="pln">nextLine</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"please input the port number of the file server"</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Scanner</span><span class="pln"> scan1</span><span class="pun">=</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Scanner</span><span class="pun">(</span><span class="typ">System</span><span class="pun">.</span><span class="pln">in</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; portNum</span><span class="pun">=</span><span class="pln">scan1</span><span class="pun">.</span><span class="pln">nextInt</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; goes</span><span class="pun">=</span><span class="kwd">true</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"input done"</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">int</span><span class="pln"> timeCount</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">while</span><span class="pun">(</span><span class="pln">goes</span><span class="pun">==</span><span class="kwd">true</span><span class="pun">){</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="com">//System.out.println("connection establishing");</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="typ">String</span><span class="pln"> sentence</span><span class="pun">=</span><span class="str">""</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">String</span><span class="pln"> modifiedSentence</span><span class="pun">;</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="typ">BufferedReader</span><span class="pln"> inFromUser </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">BufferedReader</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">InputStreamReader</span><span class="pun">(</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="pln">in</span><span class="pun">));</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="typ">Socket</span><span class="pln"> clientSocket </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Socket</span><span class="pun">(</span><span class="pln">ipAdd</span><span class="pun">,</span><span class="pln"> portNum</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="com">//System.out.println("connecting");</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="com">//System.out.println(timeCount);</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">timeCount</span><span class="pun">==</span><span class="lit">1</span><span class="pun">){</span><span class="pln"><br>&nbsp; &nbsp; sentence</span><span class="pun">=</span><span class="str">"set"</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="com">//System.out.println(sentence);</span><span class="pln"><br><br><br>&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">timeCount</span><span class="pun">!=</span><span class="lit">1</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; sentence </span><span class="pun">=</span><span class="pln"> inFromUser</span><span class="pun">.</span><span class="pln">readLine</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">sentence</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="str">"close"</span><span class="pun">))</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; clientSocket</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">sentence</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="str">"download"</span><span class="pun">))</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">byte</span><span class="pln"> </span><span class="pun">[]</span><span class="pln"> mybytearray &nbsp;</span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="kwd">byte</span><span class="pln"> </span><span class="pun">[</span><span class="pln">filesize</span><span class="pun">];</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">InputStream</span><span class="pln"> is </span><span class="pun">=</span><span class="pln"> clientSocket</span><span class="pun">.</span><span class="pln">getInputStream</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">FileOutputStream</span><span class="pln"> fos </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">FileOutputStream</span><span class="pun">(</span><span class="str">"C:\\users\\cguo\\kk.lsp"</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">BufferedOutputStream</span><span class="pln"> bos </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">BufferedOutputStream</span><span class="pun">(</span><span class="pln">fos</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bytesRead </span><span class="pun">=</span><span class="pln"> is</span><span class="pun">.</span><span class="pln">read</span><span class="pun">(</span><span class="pln">mybytearray</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="pln">mybytearray</span><span class="pun">.</span><span class="pln">length</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; current </span><span class="pun">=</span><span class="pln"> bytesRead</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">do</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp;bytesRead </span><span class="pun">=</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; is</span><span class="pun">.</span><span class="pln">read</span><span class="pun">(</span><span class="pln">mybytearray</span><span class="pun">,</span><span class="pln"> current</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="pln">mybytearray</span><span class="pun">.</span><span class="pln">length</span><span class="pun">-</span><span class="pln">current</span><span class="pun">));</span><span class="pln"><br>&nbsp; &nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">bytesRead </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> current </span><span class="pun">+=</span><span class="pln"> bytesRead</span><span class="pun">;</span><span class="pln"><br></span><span class="pun">}</span><span class="pln"> </span><span class="kwd">while</span><span class="pun">(</span><span class="pln">bytesRead </span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">);</span><span class="pln"><br><br>bos</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="pln">mybytearray</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">,</span><span class="pln"> current</span><span class="pun">);</span><span class="pln"><br>bos</span><span class="pun">.</span><span class="pln">flush</span><span class="pun">();</span><span class="pln"><br></span><span class="kwd">long</span><span class="pln"> end </span><span class="pun">=</span><span class="pln"> </span><span class="typ">System</span><span class="pun">.</span><span class="pln">currentTimeMillis</span><span class="pun">();</span><span class="pln"><br></span><span class="com">//System.out.println(end-start);</span><span class="pln"><br>bos</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span><span class="pln"><br>clientSocket</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="com">// if(sentence.equals("send"))</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="com">// clientSocket.</span><span class="pln"><br>&nbsp; &nbsp; timeCount</span><span class="pun">--;</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="com">//System.out.println("connecting1");</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">DataOutputStream</span><span class="pln"> outToServer </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">DataOutputStream</span><span class="pun">(</span><span class="pln">clientSocket<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">.</span><span class="pln">getOutputStream</span><span class="pun">());</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="typ">BufferedReader</span><span class="pln"> inFromServer </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">BufferedReader</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">InputStreamReader</span><span class="pun">(</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; clientSocket</span><span class="pun">.</span><span class="pln">getInputStream</span><span class="pun">()));</span><span class="pln"><br><br><br>&nbsp; &nbsp; </span><span class="com">//System.out.println("connecting2");</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="com">//System.out.println(sentence);</span><span class="pln"><br>&nbsp; &nbsp; outToServer</span><span class="pun">.</span><span class="pln">writeBytes</span><span class="pun">(</span><span class="pln">sentence </span><span class="pun">+</span><span class="pln"> </span><span class="str">"\n"</span><span class="pun">);</span><span class="pln"><br><br>&nbsp; &nbsp; modifiedSentence </span><span class="pun">=</span><span class="pln"> inFromServer</span><span class="pun">.</span><span class="pln">readLine</span><span class="pun">();</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"FROM SERVER:"</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> modifiedSentence</span><span class="pun">);</span><span class="pln"><br><br>&nbsp; &nbsp; clientSocket</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span><span class="pln"><br><br></span><span class="pun">}</span><span class="pln"><br></span><span class="pun">}</span><span class="pln"><br></span></code></pre><p>}</p><hr><p>TCPServer.java</p><pre class="lang-java prettyprint"><code><span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.*;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.*;</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp;</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">TCPServer</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br></span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> args</span><span class="pun">[])</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">Exception</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="typ">Socket</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="kwd">int</span><span class="pln"> firsttime</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln"><br><br><br>&nbsp; &nbsp; </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">true</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">String</span><span class="pln"> clientSentence</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">String</span><span class="pln"> capitalizedSentence</span><span class="pun">=</span><span class="str">""</span><span class="pun">;</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">ServerSocket</span><span class="pln"> welcomeSocket </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ServerSocket</span><span class="pun">(</span><span class="lit">3248</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">Socket</span><span class="pln"> connectionSocket </span><span class="pun">=</span><span class="pln"> welcomeSocket</span><span class="pun">.</span><span class="pln">accept</span><span class="pun">();</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="com">//Socket sock = welcomeSocket.accept();</span><span class="pln"><br><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">BufferedReader</span><span class="pln"> inFromClient </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">BufferedReader</span><span class="pun">(</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">InputStreamReader</span><span class="pun">(</span><span class="pln">connectionSocket</span><span class="pun">.</span><span class="pln">getInputStream</span><span class="pun">()));</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">DataOutputStream</span><span class="pln"> outToClient </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">DataOutputStream</span><span class="pun">(</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; connectionSocket</span><span class="pun">.</span><span class="pln">getOutputStream</span><span class="pun">());</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; clientSentence </span><span class="pun">=</span><span class="pln"> inFromClient</span><span class="pun">.</span><span class="pln">readLine</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">//System.out.println(clientSentence);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">clientSentence</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="str">"download"</span><span class="pun">))</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="typ">File</span><span class="pln"> myFile </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pln"> </span><span class="pun">(</span><span class="str">"C:\\Users\\cguo\\11.lsp"</span><span class="pun">);</span><span class="pln"><br>&nbsp; </span><span class="kwd">byte</span><span class="pln"> </span><span class="pun">[]</span><span class="pln"> mybytearray &nbsp;</span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="kwd">byte</span><span class="pln"> </span><span class="pun">[(</span><span class="kwd">int</span><span class="pun">)</span><span class="pln">myFile</span><span class="pun">.</span><span class="pln">length</span><span class="pun">()];</span><span class="pln"><br>&nbsp; </span><span class="typ">FileInputStream</span><span class="pln"> fis </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">FileInputStream</span><span class="pun">(</span><span class="pln">myFile</span><span class="pun">);</span><span class="pln"><br>&nbsp; </span><span class="typ">BufferedInputStream</span><span class="pln"> bis </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">BufferedInputStream</span><span class="pun">(</span><span class="pln">fis</span><span class="pun">);</span><span class="pln"><br>&nbsp; bis</span><span class="pun">.</span><span class="pln">read</span><span class="pun">(</span><span class="pln">mybytearray</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="pln">mybytearray</span><span class="pun">.</span><span class="pln">length</span><span class="pun">);</span><span class="pln"><br>&nbsp; </span><span class="typ">OutputStream</span><span class="pln"> os </span><span class="pun">=</span><span class="pln"> connectionSocket</span><span class="pun">.</span><span class="pln">getOutputStream</span><span class="pun">();</span><span class="pln"><br>&nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"Sending..."</span><span class="pun">);</span><span class="pln"><br>&nbsp; os</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="pln">mybytearray</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="pln">mybytearray</span><span class="pun">.</span><span class="pln">length</span><span class="pun">);</span><span class="pln"><br>&nbsp; os</span><span class="pun">.</span><span class="pln">flush</span><span class="pun">();</span><span class="pln"><br>&nbsp; connectionSocket</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">clientSentence</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="str">"set"</span><span class="pun">))</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">{</span><span class="pln">outToClient</span><span class="pun">.</span><span class="pln">writeBytes</span><span class="pun">(</span><span class="str">"connection is "</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"running here"</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">//welcomeSocket.close();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="com">//outToClient.writeBytes(capitalizedSentence);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br><br><br><br>&nbsp; &nbsp; &nbsp; &nbsp; capitalizedSentence </span><span class="pun">=</span><span class="pln"> clientSentence</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="str">"\n"</span><span class="pun">;</span><span class="pln"><br><br><br>&nbsp; &nbsp; </span><span class="com">//if(!clientSentence.equals("quit"))</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;outToClient</span><span class="pun">.</span><span class="pln">writeBytes</span><span class="pun">(</span><span class="pln">capitalizedSentence</span><span class="pun">+</span><span class="str">"enter the message or command: "</span><span class="pun">);</span><span class="pln"><br><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"passed"</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">//outToClient.writeBytes("enter the message or command: ");</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; welcomeSocket</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"connection terminated"</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br></span><span class="pun">}</span><span class="pln"><br></span></code></pre><p>}</p><p>So,
 the TCPServer.java will be executed first, and then execute the 
TCPClient.java, and I try to use the if clause in the TCPServer.java to 
test what is user's input,now I really want to implement how to transfer
 files from both side(download and upload).Thanks.</p></div><div class="post-taglist"><a href="http://stackoverflow.com/questions/tagged/java" class="post-tag" title="show questions tagged 'java'" rel="tag">java</a> <a href="http://stackoverflow.com/questions/tagged/sockets" class="post-tag" title="show questions tagged 'sockets'" rel="tag">sockets</a> <a href="http://stackoverflow.com/questions/tagged/tcp" class="post-tag" title="show questions tagged 'tcp'" rel="tag">tcp</a> <a href="http://stackoverflow.com/questions/tagged/file-transfer" class="post-tag" title="show questions tagged 'file-transfer'" rel="tag">file-transfer</a></div><table class="fw"><tbody><tr><td class="vt"><div class="post-menu"><a href="http://stackoverflow.com/q/4687615" title="short permalink to this question" id="link-post-4687615">link</a><span class="lsep">|</span><a href="http://stackoverflow.com/posts/4687615/edit">improve this question</a></div></td><td class="post-signature" align="right"><div class="user-info"><div class="user-action-time">edited <a href="http://stackoverflow.com/posts/4687615/revisions" title="show all edits to this post"><span title="2011-01-14 07:09:19Z" class="relativetime">Jan 14 '11 at 7:09</span></a></div><div class="user-gravatar32"><a href="http://stackoverflow.com/users/225899/james-poulson"><div class=""><img src="how-to-achieve-transfer-file-between-client-and-server-using-java-socket_files/2d205a5ec26e812c3694335b819d68c9.png" alt="" height="32" width="32"></div></a></div><div class="user-details"><a href="http://stackoverflow.com/users/225899/james-poulson">James Poulson</a><br><span class="reputation-score" title="reputation score" dir="ltr">3,264</span><span title="3 gold badges"><span class="badge1"></span><span class="badgecount">3</span></span><span title="15 silver badges"><span class="badge2"></span><span class="badgecount">15</span></span><span title="39 bronze badges"><span class="badge3"></span><span class="badgecount">39</span></span></div></div></td><td class="post-signature owner"><div class="user-info"><div class="user-action-time">asked <span title="2011-01-14 03:06:46Z" class="relativetime">Jan 14 '11 at 3:06</span></div><div class="user-gravatar32"><a href="http://stackoverflow.com/users/294385/starcaller"><div class=""><img src="how-to-achieve-transfer-file-between-client-and-server-using-java-socket_files/b05e1fc85ae4400b6bdc6e71b464e3c3.png" alt="" height="32" width="32"></div></a></div><div class="user-details"><a href="http://stackoverflow.com/users/294385/starcaller">starcaller</a><br><span class="reputation-score" title="reputation score" dir="ltr">79</span><span title="1 gold badge"><span class="badge1"></span><span class="badgecount">1</span></span><span title="3 silver badges"><span class="badge2"></span><span class="badgecount">3</span></span><span title="9 bronze badges"><span class="badge3"></span><span class="badgecount">9</span></span></div></div><br class="cbt"><div class="accept-rate cool" title="this user has accepted an answer for 9 of 15 eligible questions">60% accept rate</div></td></tr></tbody></table></div></td></tr><tr><td class="votecell"></td><td><div id="comments-4687615" class="comments dno"><table><tbody><tr><td></td><td></td></tr></tbody></table></div><div style="color: rgb(136, 136, 136);" class="was-this-helpful">feedback</div></td></tr></tbody></table></div><div id="answers"><a name="tab-top"></a><div id="answers-header"><div class="subheader answers-subheader"><h2>1 Answer</h2><div id="tabs"><a href="http://stackoverflow.com/questions/4687615/how-to-achieve-transfer-file-between-client-and-server-using-java-socket?answertab=active#tab-top" title="Answers with the latest activity first">active</a> <a href="http://stackoverflow.com/questions/4687615/how-to-achieve-transfer-file-between-client-and-server-using-java-socket?answertab=oldest#tab-top" title="Answers in the order they were provided">oldest</a> <a class="youarehere" href="http://stackoverflow.com/questions/4687615/how-to-achieve-transfer-file-between-client-and-server-using-java-socket?answertab=votes#tab-top" title="Answers with the highest score first">votes</a></div></div></div><a name="4687706"></a><div id="answer-4687706" class="answer" data-answerid="4687706"><table><tbody><tr><td class="votecell"><div class="vote"><input value="4687706" type="hidden"> <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a> <span class="vote-count-post">7</span> <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a> <span class="vote-accepted-on" title="The question owner accepted this as the best answer Jan 16 '11 at 1:58">accepted</span></div></td><td class="answercell"><div class="post-text"><p>Reading
 quickly through the source it seems that you're not far off. The 
following link should help (I did something similar but for FTP). For a 
file send from server to client, you start off with a file instance and 
an array of bytes. You then read the File into the byte array and write 
the byte array to the OutputStream which corresponds with the 
InputStream on the client's side.</p><p><a href="http://www.rgagnon.com/javadetails/java-0542.html" rel="nofollow">http://www.rgagnon.com/javadetails/java-0542.html</a></p><p>Edit:
 Here's a working ultra-minimalistic file sender and receiver. Make sure
 you understand what the code is doing on both sides.</p><pre class="lang-java prettyprint"><code><span class="kwd">package</span><span class="pln"> filesendtest</span><span class="pun">;</span><span class="pln"><br><br></span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.*;</span><span class="pln"><br></span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.*;</span><span class="pln"><br><br></span><span class="kwd">class</span><span class="pln"> </span><span class="typ">TCPServer</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> fileToSend </span><span class="pun">=</span><span class="pln"> </span><span class="str">"C:\\test1.pdf"</span><span class="pun">;</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> args</span><span class="pun">[])</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">true</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">ServerSocket</span><span class="pln"> welcomeSocket </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">Socket</span><span class="pln"> connectionSocket </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">BufferedOutputStream</span><span class="pln"> outToClient </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; welcomeSocket </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ServerSocket</span><span class="pun">(</span><span class="lit">3248</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; connectionSocket </span><span class="pun">=</span><span class="pln"> welcomeSocket</span><span class="pun">.</span><span class="pln">accept</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; outToClient </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">BufferedOutputStream</span><span class="pun">(</span><span class="pln">connectionSocket</span><span class="pun">.</span><span class="pln">getOutputStream</span><span class="pun">());</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">IOException</span><span class="pln"> ex</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">// Do exception handling</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">outToClient </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">File</span><span class="pln"> myFile </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="pln"> fileToSend </span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">byte</span><span class="pun">[]</span><span class="pln"> mybytearray </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="kwd">byte</span><span class="pun">[(</span><span class="kwd">int</span><span class="pun">)</span><span class="pln"> myFile</span><span class="pun">.</span><span class="pln">length</span><span class="pun">()];</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">FileInputStream</span><span class="pln"> fis </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fis </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">FileInputStream</span><span class="pun">(</span><span class="pln">myFile</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">FileNotFoundException</span><span class="pln"> ex</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">// Do exception handling</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">BufferedInputStream</span><span class="pln"> bis </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">BufferedInputStream</span><span class="pun">(</span><span class="pln">fis</span><span class="pun">);</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bis</span><span class="pun">.</span><span class="pln">read</span><span class="pun">(</span><span class="pln">mybytearray</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> mybytearray</span><span class="pun">.</span><span class="pln">length</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; outToClient</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="pln">mybytearray</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> mybytearray</span><span class="pun">.</span><span class="pln">length</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; outToClient</span><span class="pun">.</span><span class="pln">flush</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; outToClient</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; connectionSocket</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">// File sent, exit the main method</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">IOException</span><span class="pln"> ex</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">// Do exception handling</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br></span><span class="pun">}</span><span class="pln"><br></span></code></pre><hr><pre class="lang-java prettyprint"><code><span class="kwd">package</span><span class="pln"> filesendtest</span><span class="pun">;</span><span class="pln"><br><br></span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.*;</span><span class="pln"><br></span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">ByteArrayOutputStream</span><span class="pun">;</span><span class="pln"><br></span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.*;</span><span class="pln"><br><br></span><span class="kwd">class</span><span class="pln"> </span><span class="typ">TCPClient</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> serverIP </span><span class="pun">=</span><span class="pln"> </span><span class="str">"127.0.0.1"</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> serverPort </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3248</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> fileOutput </span><span class="pun">=</span><span class="pln"> </span><span class="str">"C:\\testout.pdf"</span><span class="pun">;</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> args</span><span class="pun">[])</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">byte</span><span class="pun">[]</span><span class="pln"> aByte </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="kwd">byte</span><span class="pun">[</span><span class="lit">1</span><span class="pun">];</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">int</span><span class="pln"> bytesRead</span><span class="pun">;</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">Socket</span><span class="pln"> clientSocket </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">InputStream</span><span class="pln"> is </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; clientSocket </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Socket</span><span class="pun">(</span><span class="pln"> serverIP </span><span class="pun">,</span><span class="pln"> serverPort </span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; is </span><span class="pun">=</span><span class="pln"> clientSocket</span><span class="pun">.</span><span class="pln">getInputStream</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">IOException</span><span class="pln"> ex</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">// Do exception handling</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">ByteArrayOutputStream</span><span class="pln"> baos </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ByteArrayOutputStream</span><span class="pun">();</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">is </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">FileOutputStream</span><span class="pln"> fos </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">BufferedOutputStream</span><span class="pln"> bos </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fos </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">FileOutputStream</span><span class="pun">(</span><span class="pln"> fileOutput </span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bos </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">BufferedOutputStream</span><span class="pun">(</span><span class="pln">fos</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bytesRead </span><span class="pun">=</span><span class="pln"> is</span><span class="pun">.</span><span class="pln">read</span><span class="pun">(</span><span class="pln">aByte</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> aByte</span><span class="pun">.</span><span class="pln">length</span><span class="pun">);</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">do</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; baos</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="pln">aByte</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bytesRead </span><span class="pun">=</span><span class="pln"> is</span><span class="pun">.</span><span class="pln">read</span><span class="pun">(</span><span class="pln">aByte</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">bytesRead </span><span class="pun">!=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">);</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bos</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="pln">baos</span><span class="pun">.</span><span class="pln">toByteArray</span><span class="pun">());</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bos</span><span class="pun">.</span><span class="pln">flush</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bos</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; clientSocket</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">IOException</span><span class="pln"> ex</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">// Do exception handling</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br></span><span class="pun">}</span><span class="pln"><br></span></code></pre><p><strong>Related</strong></p><p><a href="http://stackoverflow.com/questions/664389/byte-array-of-unknown-length-in-java">Byte array of unknown length in java</a></p><p>Edit: The following could be used to fingerprint small files before and after transfer (use SHA if you feel it's necessary):</p><pre class="lang-java prettyprint"><code><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> md5String</span><span class="pun">(</span><span class="typ">File</span><span class="pln"> file</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">InputStream</span><span class="pln"> fin </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">FileInputStream</span><span class="pun">(</span><span class="pln">file</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; java</span><span class="pun">.</span><span class="pln">security</span><span class="pun">.</span><span class="typ">MessageDigest</span><span class="pln"> md5er </span><span class="pun">=</span><span class="pln"> </span><span class="typ">MessageDigest</span><span class="pun">.</span><span class="pln">getInstance</span><span class="pun">(</span><span class="str">"MD5"</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">byte</span><span class="pun">[]</span><span class="pln"> buffer </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="kwd">byte</span><span class="pun">[</span><span class="lit">1024</span><span class="pun">];</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">int</span><span class="pln"> read</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">do</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; read </span><span class="pun">=</span><span class="pln"> fin</span><span class="pun">.</span><span class="pln">read</span><span class="pun">(</span><span class="pln">buffer</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">read </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; md5er</span><span class="pun">.</span><span class="pln">update</span><span class="pun">(</span><span class="pln">buffer</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> read</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">read </span><span class="pun">!=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; fin</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">byte</span><span class="pun">[]</span><span class="pln"> digest </span><span class="pun">=</span><span class="pln"> md5er</span><span class="pun">.</span><span class="pln">digest</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">digest </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">String</span><span class="pln"> strDigest </span><span class="pun">=</span><span class="pln"> </span><span class="str">"0x"</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> digest</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; strDigest </span><span class="pun">+=</span><span class="pln"> </span><span class="typ">Integer</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">((</span><span class="pln">digest</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">0xff</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">+</span><span class="pln"> </span><span class="lit">0x100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">16</span><span class="pun">).</span><span class="pln">substring</span><span class="pun">(</span><span class="lit">1</span><span class="pun">).</span><span class="pln">toUpperCase</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> strDigest</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Exception</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br></span><span class="pun">}</span><span class="pln"><br></span></code></pre></div><table class="fw"><tbody><tr><td class="vt"><div class="post-menu"><a href="http://stackoverflow.com/a/4687706" title="short permalink to this answer" id="link-post-4687706">link</a><span class="lsep">|</span><a href="http://stackoverflow.com/posts/4687706/edit">improve this answer</a></div></td><td class="post-signature" align="right"><div class="user-info"><div class="user-action-time">edited <a href="http://stackoverflow.com/posts/4687706/revisions" title="show all edits to this post"><span title="2012-06-27 08:19:19Z" class="relativetime">yesterday</span></a></div><div class="user-gravatar32"></div><div class="user-details"><br></div></div></td><td class="post-signature" align="right"><div class="user-info"><div class="user-action-time">answered <span title="2011-01-14 03:25:50Z" class="relativetime">Jan 14 '11 at 3:25</span></div><div class="user-gravatar32"><a href="http://stackoverflow.com/users/225899/james-poulson"><div class=""><img src="how-to-achieve-transfer-file-between-client-and-server-using-java-socket_files/2d205a5ec26e812c3694335b819d68c9.png" alt="" height="32" width="32"></div></a></div><div class="user-details"><a href="http://stackoverflow.com/users/225899/james-poulson">James Poulson</a><br><span class="reputation-score" title="reputation score" dir="ltr">3,264</span><span title="3 gold badges"><span class="badge1"></span><span class="badgecount">3</span></span><span title="15 silver badges"><span class="badge2"></span><span class="badgecount">15</span></span><span title="39 bronze badges"><span class="badge3"></span><span class="badgecount">39</span></span></div></div></td></tr></tbody></table></td></tr><tr><td class="votecell"></td><td><div id="comments-4687706" class="comments"><table><tbody><tr id="comment-5170424" class="comment"><td></td><td class="comment-text"><div><span class="comment-copy">@James:I
 have updated my code, however, it can't receive the file correctly, the
 downloaded file is empty, can you take sometime check it out please.</span> –&nbsp;<a href="http://stackoverflow.com/users/294385/starcaller" title="79 reputation" class="comment-user owner">starcaller</a> <span class="comment-date" dir="ltr"><a class="comment-link" onclick="StackExchange.question.highlightComment(5170424, 4687706)" href="#comment5170424_4687706"><span title="2011-01-14 04:06:29Z">Jan 14 '11 at 4:06</span></a></span></div></td></tr><tr id="comment-5170534" class="comment"><td></td><td class="comment-text"><div><span class="comment-copy">Also make sure you close the <code>BufferedOutputStream</code> (the usual culprit when a file is empty).</span> –&nbsp;<a href="http://stackoverflow.com/users/225899/james-poulson" title="3264 reputation" class="comment-user">James Poulson</a> <span class="comment-date" dir="ltr"><a class="comment-link" onclick="StackExchange.question.highlightComment(5170534, 4687706)" href="#comment5170534_4687706"><span title="2011-01-14 04:23:04Z">Jan 14 '11 at 4:23</span></a></span></div></td></tr><tr id="comment-5170546" class="comment"><td></td><td class="comment-text"><div><span class="comment-copy">@James: I tried that but it didn't work either.</span> –&nbsp;<a href="http://stackoverflow.com/users/294385/starcaller" title="79 reputation" class="comment-user owner">starcaller</a> <span class="comment-date" dir="ltr"><a class="comment-link" onclick="StackExchange.question.highlightComment(5170546, 4687706)" href="#comment5170546_4687706"><span title="2011-01-14 04:25:18Z">Jan 14 '11 at 4:25</span></a></span></div></td></tr><tr id="comment-5170578" class="comment"><td></td><td class="comment-text"><div><span class="comment-copy">It'll
 be difficult figuring out what's happening unless there's a way to view
 the updated code. Have you checked the contents of the byte arrays on 
both side? You can output to the console using Arrays.toString( 
nameOfYourArray ).</span> –&nbsp;<a href="http://stackoverflow.com/users/225899/james-poulson" title="3264 reputation" class="comment-user">James Poulson</a> <span class="comment-date" dir="ltr"><a class="comment-link" onclick="StackExchange.question.highlightComment(5170578, 4687706)" href="#comment5170578_4687706"><span title="2011-01-14 04:29:52Z">Jan 14 '11 at 4:29</span></a></span></div></td></tr><tr id="comment-8398432" class="comment"><td class="comment-actions"><table><tbody><tr><td class="comment-score"><span title="number of 'great comment' votes received" class="cool">1</span></td><td>&nbsp;</td></tr></tbody></table></td><td class="comment-text"><div><span class="comment-copy">@James Poulson Your answer is very useful,thanks!</span> –&nbsp;<a href="http://stackoverflow.com/users/702048/alberto-solano" title="1149 reputation" class="comment-user">Alberto Solano</a> <span class="comment-date" dir="ltr"><a class="comment-link" onclick="StackExchange.question.highlightComment(8398432, 4687706)" href="#comment8398432_4687706"><span title="2011-08-11 16:58:24Z">Aug 11 '11 at 16:58</span></a></span></div></td></tr></tbody></table></div><a id="comments-link-4687706" class="comments-link" data-comments-count="3" title="expand to show all comments on this post">show <b>3</b> more comments</a><div style="color: rgb(106, 106, 106);" class="was-this-helpful">Was this post useful to you? &nbsp;&nbsp;<input style="opacity: 0.109785;" class="anon-vote" value="Yes" type="button"> &nbsp;<input style="opacity: 0.109785;" class="anon-vote" value="No" type="button"></div></td></tr></tbody></table></div><a name="new-answer"></a><form id="post-form" action="/questions/4687615/answer/submit" method="post" class="post-form"><h2 class="space">Your Answer</h2><div id="post-editor" class="post-editor"><div class="wmd-container"><div id="wmd-button-bar" class="wmd-button-bar"><ul id="wmd-button-row" class="wmd-button-row"><li style="left: 0px;" class="wmd-button" id="wmd-bold-button"><span style="background-position: 0px -20px;"></span></li><li style="left: 25px;" class="wmd-button" id="wmd-italic-button"><span style="background-position: -20px -20px;"></span></li><li style="left: 50px;" class="wmd-spacer" id="wmd-spacer1"><span style="background-position: -40px -20px;"></span></li><li style="left: 75px;" class="wmd-button" id="wmd-link-button"><span style="background-position: -40px -20px;"></span></li><li style="left: 100px;" class="wmd-button" id="wmd-quote-button"><span style="background-position: -60px -20px;"></span></li><li style="left: 125px;" class="wmd-button" id="wmd-code-button"><span style="background-position: -80px -20px;"></span></li><li style="left: 150px;" class="wmd-button" id="wmd-image-button"><span style="background-position: -100px -20px;"></span></li><li style="left: 175px;" class="wmd-spacer" id="wmd-spacer2"><span style="background-position: -120px -20px;"></span></li><li style="left: 200px;" class="wmd-button" id="wmd-olist-button"><span style="background-position: -120px -20px;"></span></li><li style="left: 225px;" class="wmd-button" id="wmd-ulist-button"><span style="background-position: -140px -20px;"></span></li><li style="left: 250px;" class="wmd-button" id="wmd-heading-button"><span style="background-position: -160px -20px;"></span></li><li style="left: 275px;" class="wmd-button" id="wmd-hr-button"><span style="background-position: -180px -20px;"></span></li><li style="left: 300px;" class="wmd-spacer" id="wmd-spacer3"><span style="background-position: -200px -20px;"></span></li><li style="left: 325px;" class="wmd-button" id="wmd-undo-button"><span style="background-position: -200px -20px;"></span></li><li style="left: 350px;" class="wmd-button" id="wmd-redo-button"><span style="background-position: -220px -20px;"></span></li></ul></div><textarea id="wmd-input" class="wmd-input" name="post-text" cols="92" rows="15" tabindex="101"></textarea></div><div class="fl" style="margin-top: 8px; height:24px;">&nbsp;</div><div id="draft-saved" class="draft-saved community-option fl" style="margin-top: 8px; height:24px; display:none;">draft saved</div><div id="draft-discarded" class="draft-discarded community-option fl" style="margin-top: 8px; height:24px; display:none;">draft discarded</div><div id="wmd-preview" class="wmd-preview"></div><div></div><div class="edit-block"><input id="fkey" name="fkey" value="db585294a1f4622a25e474b1c9a22136" type="hidden"> <input id="author" name="author" type="text"></div></div><div class="form-item"><table><tbody><tr><td class="vm open-id-login"><a id="login-link" style="font-size: 200%; margin-left: 30px;" href="http://stackoverflow.com/users/login?returnurl=%2fquestions%2f4687615%2fhow-to-achieve-transfer-file-between-client-and-server-using-java-socket">log in</a> <script type="text/javascript">StackExchange.ready(function () {
                        StackExchange.helpers.onClickDraftSave('#login-link');
                    });
                </script></td><td class="orcell"><div class="orword">or</div><div class="orline"></div></td><td class="vm"><div><label for="display-name">Name</label> <input id="display-name" name="display-name" size="30" maxlength="30" tabindex="105" type="text"></div><div><label for="m-address">Email</label> <input id="m-address" name="m-address" size="40" maxlength="100" tabindex="106" type="text"> <span class="edit-field-overlay">required, but never shown</span></div><div><label for="home-page">Home Page</label> <input id="home-page" name="home-page" size="40" maxlength="200" tabindex="107" type="text"></div></td></tr></tbody></table></div><div class="form-submit cbt"><input id="submit-button" value="Post Your Answer" tabindex="110" type="submit"> <a href="#" class="discard-answer dno">discard</a><p class="privacy-policy-agreement">By posting your answer, you agree to the <a href="http://stackexchange.com/legal/privacy-policy" target="_blank">privacy policy</a> and <a href="http://stackexchange.com/legal/terms-of-service" target="_blank">terms of service</a>.</p></div></form><h2 class="bottom-notice">Not the answer you're looking for? Browse other questions tagged <a href="http://stackoverflow.com/questions/tagged/java" class="post-tag" title="show questions tagged 'java'" rel="tag">java</a> <a href="http://stackoverflow.com/questions/tagged/sockets" class="post-tag" title="show questions tagged 'sockets'" rel="tag">sockets</a> <a href="http://stackoverflow.com/questions/tagged/tcp" class="post-tag" title="show questions tagged 'tcp'" rel="tag">tcp</a> <a href="http://stackoverflow.com/questions/tagged/file-transfer" class="post-tag" title="show questions tagged 'file-transfer'" rel="tag">file-transfer</a> or <a href="http://stackoverflow.com/questions/ask">ask your own question</a>.</h2></div></div><div id="sidebar"><script type="text/javascript">window.showNewUser = true;
            
                (function(){
                    var cs = window.sessionStorage && window.sessionStorage['tNewsletter'];
                    var m = /:\/\/([^\/]*)/.exec(document.referrer);
                    var h = {'www.reddit.com':1,'news.ycombinator.com':1};
                    if(window.sessionStorage && (cs || (m && m.length == 2 && h[m[1]]))){
                        showNewUser = false;
                        StackExchange.ready(function(){
                            StackExchange.newsletterAd.loader(m[1], cs);
                        });
                    }
                    if (window.localStorage && showNewUser){
                        var c = parseInt(localStorage['nuCounter'],10); 
                        c = isNaN(c) ? 1 : c+1;
                        window.localStorage['nuCounter'] = c; 
                        showNewUser = c < 10;
                    }
                })()
            
     </script><div class="module newuser newuser-greeting" id="newuser-box" style=""><h4>Hello World!</h4><div><p>This is a collaboratively edited question and answer site for <b>professional and enthusiast programmers</b>. It's 100% free, no registration required.</p><p class="ar"><a href="http://stackoverflow.com/about?mnu=1">about »</a>&nbsp;&nbsp;&nbsp;<a href="http://stackoverflow.com/faq?mnu=1">faq »</a></p></div></div><script type="text/javascript">if (showNewUser) {
            document.getElementById('newuser-box').style.display = '';
        }
     </script><div class="module question-stats"><p class="label-key">tagged</p><div class="tagged"><a href="http://stackoverflow.com/questions/tagged/java" class="post-tag" title="show questions tagged 'java'" rel="tag">java</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">263747</span></span><br><a href="http://stackoverflow.com/questions/tagged/sockets" class="post-tag" title="show questions tagged 'sockets'" rel="tag">sockets</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">11480</span></span><br><a href="http://stackoverflow.com/questions/tagged/tcp" class="post-tag" title="show questions tagged 'tcp'" rel="tag">tcp</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">4031</span></span><br><a href="http://stackoverflow.com/questions/tagged/file-transfer" class="post-tag" title="show questions tagged 'file-transfer'" rel="tag">file-transfer</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">337</span></span><br></div><table id="qinfo"><tbody><tr><td><p class="label-key">asked</p></td><td style="padding-left:10px"><p class="label-key" title="2011-01-14 03:06:46Z"><b>1 year ago</b></p></td></tr><tr><td><p class="label-key">viewed</p></td><td style="padding-left:10px"><p class="label-key"><b>11,433 times</b></p></td></tr><tr><td><p class="label-key">active</p></td><td style="padding-left:10px"><p class="label-key"><b><a href="http://stackoverflow.com/questions/4687615/how-to-achieve-transfer-file-between-client-and-server-using-java-socket?lastactivity" class="lastactivity-link" title="2012-06-27 08:19:19Z">yesterday</a></b></p></td></tr></tbody></table></div><div class="module community-bulletin" data-tracker="cb=1"><h4>Community Bulletin</h4><div class="related"><div class="spacer"><div class="bulletin-item-type"><a href="http://blog.stackoverflow.com/?cb=1" class="event-date" target="_blank">blog</a></div><div class="bulletin-item-content"><a href="http://blog.stackoverflow.com/2012/06/welcome-to-the-arqade/?cb=1" class="question-hyperlink" target="_blank">Welcome to the Arqade: Rebranding a Successful Site</a></div><br class="cbt"></div></div></div><script type="text/javascript">var scriptSrc = "http://engine2.adzerk.net/z/8277/adzerk1_2_4_43,adzerk2_2_17_45?keywords=java,sockets,tcp,file-transfer";
            if (document.referrer) {
                if (/\?/.test(scriptSrc))
                    scriptSrc += "&";
                else
                    scriptSrc += "?";
                scriptSrc += "xReferrer=" + document.referrer;
            }
            StackExchange.ready(function(){var z = document.createElement("script"); z.type = "text/javascript"; z.async = "true"; z.src = scriptSrc; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(z, s);});
        </script><div class="everyonelovesstackoverflow" id="adzerk2"><a href="http://engine.adzerk.net/redirect/0/8211/7472/8277/a6f69a465f814a0b88a90c337a557310/45/1178/13035/634764939129538020/?keywords=java%2csockets%2ctcp%2cfile-transfer" rel="nofollow" target="_blank" title=""><img src="how-to-achieve-transfer-file-between-client-and-server-using-java-socket_files/bd294ce7ff4c43b6aad4aa4169fb819b.jpg" title="" alt="" border="0" height="250" width="220"></a></div><div id="hireme"><script type="text/javascript">var careers_adurl="http://careers.stackoverflow.com/gethired/js",careers_cssurl="http://cdn.sstatic.net/careers/gethired/sidebar.css?fffffffff879eaa0",careers_leaderboardcssurl="http://cdn.sstatic.net/careers/gethired/ninja.css?375106",careers_companycssurl="http://cdn.sstatic.net/careers/gethired/company",careers_adselector="div.hireme, div#hireme";StackExchange.ready(function(){$.ajax({url:"http://cdn.sstatic.net/careers/gethired/loader.min.js?375106",dataType:"script",cache:true})});
        </script></div><div class="module sidebar-linked"><h4 id="h-linked">Linked</h4><div class="linked" data-tracker="lq=1"><div class="spacer"><a href="http://stackoverflow.com/questions/664389/byte-array-of-unknown-length-in-java?lq=1" class="question-hyperlink">Byte array of unknown length in java</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/4666180/how-to-implement-tcp-server-and-tcp-client-in-java-to-transfer-files?lq=1" class="question-hyperlink">how to implement TCP server and TCP client in java to transfer files</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/4697226/is-this-the-best-way-to-download-a-file-in-java?lq=1" class="question-hyperlink">Is this the best way to download a file in java?</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/4687884/buffered-classes-and-sending-receiving-data?lq=1" class="question-hyperlink">Buffered classes and sending/receiving data</a></div></div></div><div class="module sidebar-related"><h4 id="h-related">Related</h4><div class="related" data-tracker="rq=1"><div class="spacer"><a href="http://stackoverflow.com/questions/798195/transfer-a-file-through-udp-in-java?rq=1" class="question-hyperlink">Transfer a file through UDP in java</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/1853366/java-file-transfer-getting-stuck-halfway?rq=1" class="question-hyperlink">Java File Transfer getting stuck halfway</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/2017585/transfer-file-over-socket?rq=1" class="question-hyperlink">Transfer file over socket</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/2165006/simple-java-client-server-program?rq=1" class="question-hyperlink">Simple Java Client/Server Program</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/2887116/java-socket-programming-header?rq=1" class="question-hyperlink">Java socket programming header</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/4242065/tcp-file-transfer-issue?rq=1" class="question-hyperlink">TCP File Transfer Issue</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/4385887/c-sharp-tcp-socket-client-server-transfer-multiple-files-problem?rq=1" class="question-hyperlink">C# tcp socket client server transfer multiple files problem</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/4441935/c-sharp-tcp-socket-client-downloads-files-from-server?rq=1" class="question-hyperlink">C# tcp socket client downloads files from server</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/4666180/how-to-implement-tcp-server-and-tcp-client-in-java-to-transfer-files?rq=1" class="question-hyperlink">how to implement TCP server and TCP client in java to transfer files</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/5793698/requesting-specific-file-from-a-server-via-socket-in-java?rq=1" class="question-hyperlink">Requesting specific file from a server via socket in java</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/6137735/try-sending-file-and-string-through-same-sockt-in-java?rq=1" class="question-hyperlink">try sending file and string through same sockt (in java)</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/6432288/java-tcp-server-read-file-name?rq=1" class="question-hyperlink">Java TCP Server read file name</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/6700656/wrong-file-transfer-over-java-socket?rq=1" class="question-hyperlink">Wrong file transfer over java Socket</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/7022473/transfer-multiple-images-through-tcp-socket-s?rq=1" class="question-hyperlink">Transfer multiple images through TCP socket/s</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/7051487/transfer-a-file-from-a-website-to-a-server?rq=1" class="question-hyperlink">Transfer a file from a website to a server</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/7055519/file-transfer-through-socket?rq=1" class="question-hyperlink">File transfer through socket</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/7055927/socket-file-transfer?rq=1" class="question-hyperlink">Socket file transfer</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/7500059/making-file-transfer-more-efficient-java?rq=1" class="question-hyperlink">Making file transfer more efficient Java</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/7689231/java-socket-synchronization-behavior?rq=1" class="question-hyperlink">Java Socket synchronization behavior</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/7902755/tcp-receivebuffersize-maximum-size-in-net-framework?rq=1" class="question-hyperlink">TCP ReceiveBufferSize maximum size in .Net Framework</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/8315436/server-client-socket-programming-output-difficulties?rq=1" class="question-hyperlink">server client socket programming output difficulties</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/8966007/file-transfer-succeeds-only-the-first-time-fails-consuquently?rq=1" class="question-hyperlink">File transfer succeeds only the first time, fails consuquently</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/9218157/server-socket-always-return-null-to-the-client-java?rq=1" class="question-hyperlink">Server socket always return null to the client , Java</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/10628295/how-to-transfer-multiple-files-between-client-and-server?rq=1" class="question-hyperlink">How to transfer multiple files between client and server?</a></div><div class="spacer"><a href="http://stackoverflow.com/questions/10967343/performance-issue-with-tcp-client-and-server-program-using-android-and-pc?rq=1" class="question-hyperlink">performance issue with TCP client and server program using android and PC</a></div></div></div></div><div id="feed-link"><div id="feed-link-text"><a href="http://stackoverflow.com/feeds/question/4687615" title="feed of this question and its answers"><span class="feed-icon"></span>question feed</a></div></div><noscript>
    <div><img src="/posts/4687615/ivc/8724" class="dno" alt="" width="0" height="0"></div>
</noscript><div style="display:none" id="prettify-lang">lang-java</div></div></div></div><div id="footer"><div class="footerwrap"><div id="footer-menu"><a href="http://stackoverflow.com/about">about</a> | <a href="http://stackoverflow.com/faq">faq</a> | <a href="http://blog.stackexchange.com/?blb=1">blog</a> | <a href="http://chat.stackoverflow.com/">chat</a> | <a href="http://data.stackexchange.com/">data</a> | <a href="http://shop.stackexchange.com/">shop</a> | <a href="http://stackexchange.com/legal">legal</a> | <a href="http://stackexchange.com/legal/privacy-policy">privacy policy</a> | <a href="http://engine.adzerk.net/redirect/0/2776/2751/0/4de3c60f719c4dfcb1a57531c7050090/0">advertising info</a> | <a onclick="StackExchange.switchMobile('on', '/questions/4687615/how-to-achieve-transfer-file-between-client-and-server-using-java-socket')">mobile</a> | <b><a href="mailto:team@stackoverflow.com">contact us</a></b> | <b><a href="http://meta.stackoverflow.com/">feedback</a></b><div id="footer-sites"><span style="color:#FE7A15;font-size:140%">■</span>&nbsp;<a href="http://stackoverflow.com/">stackoverflow.com</a>&nbsp; <span style="color:#FE7A15;font-size:140%">■</span>&nbsp;<a href="http://stackapps.com/">api/apps</a>&nbsp; <span style="color:#FE7A15;font-size:140%">■</span>&nbsp;<a href="http://careers.stackoverflow.com/">careers</a>&nbsp; <span style="color:#E8272C;font-size:140%">■</span>&nbsp;<a href="http://serverfault.com/">serverfault.com</a>&nbsp; <span style="color:#00AFEF;font-size:140%">■</span>&nbsp;<a href="http://superuser.com/">superuser.com</a>&nbsp; <span style="color:#969696;font-size:140%">■</span>&nbsp;<a href="http://meta.stackoverflow.com/">meta</a>&nbsp; <span style="color:#46937D;font-size:140%">■</span>&nbsp;<a href="http://area51.stackexchange.com/">area&nbsp;51</a>&nbsp; <span style="color:#C0D0DC;font-size:140%">■</span>&nbsp;<a href="http://webapps.stackexchange.com/">webapps</a>&nbsp; <span style="color:#000000;font-size:140%">■</span>&nbsp;<a href="http://gaming.stackexchange.com/">gaming</a>&nbsp; <span style="color:#dd4814;font-size:140%">■</span>&nbsp;<a href="http://askubuntu.com/">ubuntu</a>&nbsp; <span style="color:#9ce4fe;font-size:140%">■</span>&nbsp;<a href="http://webmasters.stackexchange.com/">webmasters</a>&nbsp; <span style="color:#cf4d3f;font-size:140%">■</span>&nbsp;<a href="http://cooking.stackexchange.com/">cooking</a>&nbsp; <span style="color:#f4f28d;font-size:140%">■</span>&nbsp;<a href="http://gamedev.stackexchange.com/">game development</a>&nbsp; <span style="color:#0f3559;font-size:140%">■</span>&nbsp;<a href="http://math.stackexchange.com/">math</a>&nbsp; <span style="color:#f2f2f2;font-size:140%">■</span>&nbsp;<a href="http://photo.stackexchange.com/">photography</a>&nbsp; <span style="color:#037187;font-size:140%">■</span>&nbsp;<a href="http://stats.stackexchange.com/">stats</a>&nbsp; <span style="color:#f1e7cc;font-size:140%">■</span>&nbsp;<a href="http://tex.stackexchange.com/">tex</a>&nbsp; <span style="color:#e1cdae;font-size:140%">■</span>&nbsp;<a href="http://english.stackexchange.com/">english</a>&nbsp; <span style="color:#a2d9f6;font-size:140%">■</span>&nbsp;<a href="http://cstheory.stackexchange.com/">theoretical cs</a>&nbsp; <span style="color:#1b3e6c;font-size:140%">■</span>&nbsp;<a href="http://programmers.stackexchange.com/">programmers</a>&nbsp; <span style="color:#293a5d;font-size:140%">■</span>&nbsp;<a href="http://unix.stackexchange.com/">unix</a>&nbsp; <span style="color:#bec0cb;font-size:140%">■</span>&nbsp;<a href="http://apple.stackexchange.com/">apple</a>&nbsp; <span style="color:#939185;font-size:140%">■</span>&nbsp;<a href="http://wordpress.stackexchange.com/">wordpress</a>&nbsp; <span style="color:#ebf5f5;font-size:140%">■</span>&nbsp;<a href="http://physics.stackexchange.com/">physics</a>&nbsp; <span style="color:#4176ab;font-size:140%">■</span>&nbsp;<a href="http://diy.stackexchange.com/">home&nbsp;improvement</a>&nbsp; <span style="color:#d1d8d7;font-size:140%">■</span>&nbsp;<a href="http://gis.stackexchange.com/">gis</a>&nbsp; <span style="color:#e5e2d3;font-size:140%">■</span>&nbsp;<a href="http://electronics.stackexchange.com/">electronics</a>&nbsp; <span style="color:#a4c639;font-size:140%">■</span>&nbsp;<a href="http://android.stackexchange.com/">android</a>&nbsp; <span style="color:#2e4e60;font-size:140%">■</span>&nbsp;<a href="http://security.stackexchange.com/">security</a>&nbsp; <span style="color:#45bcb5;font-size:140%">■</span>&nbsp;<a href="http://bicycles.stackexchange.com/">bicycles</a>&nbsp; <span style="color:#00adee;font-size:140%">■</span>&nbsp;<a href="http://dba.stackexchange.com/">dba</a>&nbsp; <span style="color:#2edaf0;font-size:140%">■</span>&nbsp;<a href="http://drupal.stackexchange.com/">drupal</a>&nbsp; <span style="color:#213951;font-size:140%">■</span>&nbsp;<a href="http://sharepoint.stackexchange.com/">sharepoint</a>&nbsp; <span style="color:#73abb3;font-size:140%">■</span>&nbsp;<a href="http://scifi.stackexchange.com/">scifi &amp; fantasy</a>&nbsp; <span style="color:#23629F;font-size:140%">■</span>&nbsp;<a href="http://ux.stackexchange.com/">user experience</a>&nbsp; <span style="color:#faff72;font-size:140%">■</span>&nbsp;<a href="http://skeptics.stackexchange.com/">skeptics</a>&nbsp; <span style="color:#623121;font-size:140%">■</span>&nbsp;<a href="http://rpg.stackexchange.com/">rpg</a>&nbsp; <span style="color:#e4be88;font-size:140%">■</span>&nbsp;<a href="http://judaism.stackexchange.com/">judaism</a>&nbsp;</div></div><div id="footer-flair"><a class="peer1" href="http://www.peer1.com/stackoverflow"></a><a href="http://creativecommons.org/licenses/by-sa/3.0/" class="cc-wiki-link"></a><div id="svnrev">rev 2012.6.27.3129</div></div><div id="copyright">site design / logo © 2012 stack exchange inc; user contributions licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license">cc-wiki</a> with <a href="http://blog.stackoverflow.com/2009/06/attribution-required/" rel="license">attribution required</a></div></div></div><noscript>
        <div id="noscript-warning">Stack Overflow works best with JavaScript enabled<img src="http://pixel.quantserve.com/pixel/p-c1rF4kxgLUzNc.gif" alt="" class="dno"></div>
    </noscript><script type="text/javascript">var _gaq=_gaq||[];_gaq.push(['_setAccount','UA-5620270-1']);
        _gaq.push(['_setCustomVar', 1, 'tags', '|java|sockets|tcp|file-transfer|']); 
_gaq.push(['_trackPageview']);
    var _qevents = _qevents || [];
    (function(){
        var s=document.getElementsByTagName('script')[0];
        var ga=document.createElement('script');
        ga.type='text/javascript';
        ga.async=true;
        ga.src='http://www.google-analytics.com/ga.js';
        s.parentNode.insertBefore(ga,s);
        var sc=document.createElement('script');
        sc.type='text/javascript';
        sc.async=true;
        sc.src='http://edge.quantserve.com/quant.js'; 
        s.parentNode.insertBefore(sc,s);
    })();
    </script> <script type="text/javascript">_qevents.push({ qacct: "p-c1rF4kxgLUzNc" });
    </script> <script type="text/javascript" src="how-to-achieve-transfer-file-between-client-and-server-using-java-socket_files/jquery.js"></script><script type="text/javascript" style="display:none">'use strict';window.StackExchange={};function CTIsPlayback(){try{return parent&&parent.WebPlayer}catch(e){return!1}}if(!CTIsPlayback()&&top!=self)throw top.location.replace(document.location),$(function(){$("head").add("body").remove()}),alert("For security reasons, framing is not allowed; click OK to remove the frames."),Error();StackExchange.init=function(){var e=function(a){if(!window.jQuery)if("complete"!=document.readyState)setTimeout(function(){e(a)},1E3);else{var d=document.createElement("div");d.id="noscript-padding";var g=document.createElement("div");g.id="noscript-warning";g.innerHTML=a+" requires external JavaScript from another domain, which is blocked or failed to load.";document.body.insertBefore(d,document.body.firstChild);document.body.appendChild(g)}},a=function(){$(document).keyup(function(a){27==a.which&&($("#lightbox:not(.no-esc-remove), .error-notification, .popup, .share-tip, .esc-remove").fadeOutAndRemove(),$(".esc-hide").fadeOut(),window.genuwine&&genuwine.isVisible()&&genuwine.click(),window.profileLink&&profileLink.hide())})},c=function(){var a=$("#hlinks"),d=$("#search input[name=q]"),g=d.width(),c=2.5*g,e,k=function(a){d.queue("expand",a)},h=!1,l=!("placeholder"in document.createElement("input"));l&&!StackExchange.options.isMobile&&(""==d[0].value&&(d[0].value="search"),d.bind({focus:function(){"search"==this.value&&(this.value="")}}));d.keydown(function(g){if(h||46>g.keyCode&&8!=g.keyCode&&32!=g.keyCode)return!0;h=!0;clearTimeout(e);d.clearQueue("expand");k(function(g){d[0].placeholder="";a.fadeOut(100,g)});k(function(a){d.animate({width:c,"max-width":c},100,a)});k(function(){0==d.parent().find(".search-prompt").length&&d.before('<span class="search-prompt">search:</span>')});3==d.queue("expand").length&&d.dequeue("expand")}).focusout(function(){e=setTimeout(function(){k(function(a){d.parent().find(".search-prompt").remove();a()});k(function(a){d.animate({width:g,"max-width":g},100,a)});k(function(g){l&&""==d[0].value&&(d[0].value="search");d[0].placeholder="search";a.fadeIn(100,g)});3==d.queue("expand").length&&d.dequeue("expand");h=!1},200)});$("#search").keydown(function(a){if(13==a.which&&a.ctrlKey&&d.val())return window.open("/search?q="+encodeURIComponent(d.val()),"_newtab"),!1})};return function(f){StackExchange.options=f;var d=f.serverTime-(new Date).getTime()/1E3;e(f.site.name);$.ajaxSetup({cache:!1});StackExchange.init.createJqueryExtensions();$(function(){a();c();StackExchange.using(StackExchange.options.user.isAnonymous?"anonymous":"loggedIn",function(){StackExchange.initialized.resolve()},!0,f.fullPostfix);var g=StackExchange.options.styleCodeAdditionalLang;g&&StackExchange.ifUsing("prettify",function(){return StackExchange.loadJsFile("third-party/prettify/additional-langs/"+g)});StackExchange.ready(function(){genuwine.init(f.user.accountId||null,f.user.inboxUnviewedCount,f.user.notificationsUnviewedCount);f.user.messages&&StackExchange.notify.showMessages(f.user.messages,f.isMobile);f.site.globalAuthDisabled||(!f.site.isChildMeta&&f.user.isAnonymous&&gauth.checkStackAuth(f.stackAuthUrl),gauth.informStackAuth(f.stackAuthUrl));f.user.isAnonymous||profileLink.init(f.user.gravatar,f.isMobile,f.user.profileUrl+"?tab=activity",d);f.enableUserHovercards&&StackExchange.usermenu.init();StackExchange.tagPreferences?StackExchange.tagPreferences.init():StackExchange.tagmenu.init();$("*[data-tracker]").track()})})}}();StackExchange.debug={log:function(){},init:function(){this.log=function(e){$(function(){var a=$("#debug-messages");a.length||(a=$("<div id='debug-messages' style='text-align:left;position:fixed;top:50px;left:50px;z-index:1000;background:white;border:2px solid black;width:300px;padding:10px;' />").append($("<span style='cursor:pointer;color:#999'>(close debug messages)</span>").click(function(){$("#debug-messages").remove()})).appendTo("body"));$("<div style='margin-top:10px' />").text(e).appendTo(a)})}}};StackExchange.initialized=$.Deferred();StackExchange.ready=function(e){StackExchange.initialized.done(e)};if(window.serq)for(var i=0;i<window.serq.length;i++)StackExchange.ready(window.serq[i]);(function(){var e={anonymous:"full-anon.js",loggedIn:"full.js",prettify:"prettify-full.js",pseudoModerator:"moderator.js",inlineEditing:"full.js",editor:"wmd.js",autocomplete:"third-party/jquery.autocomplete.min.js",tagAutocomplete:"tageditor.js",tagEditor:"tageditornew.js",mobile:"mobile.js",help:"help.js",inlineTagEditing:"inline-tag-editing.js",mathjaxEditing:"mathjax-editing.js",mathjaxEditingNew:"mathjax-editing-new.js",revisions:"revisions.js",suggestedEdits:"suggested-edits.js",mockups:"mockups.js"},a={},c={},f,d={},g=function(a,g){return function(d){var c=a[d];c||(c=a[d]=g(d));return c}},n=function(g){var g=a[g],d,c=$.Deferred(),e=$.when(c),f;if(g)for(d=0;d<g.length;d++)(f=g[d].call(null))&&$.isFunction(f.promise)&&(e=$.when(e,f));c.resolve();return e},j=function(){if(!f){var a=$("script[src*='/stub.js']:first");0==a.length?(StackExchange.debug.log("couldn't figure out location of stub.js"),f="/content/js/"):f=a.attr("src").replace(/\/stub\.js.*$/,"/")}return f},k=function(a){var g=$.Deferred(),d=document.createElement("script");d.async="async";d.type="text/javascript";d.src=a;d.onload=d.onreadystatechange=function(a,c){if(!d.readyState||/loaded|complete/.test(d.readyState))c?g.reject():g.resolve()};d.onerror=function(){g.reject()};$("head")[0].appendChild(d);return g.promise()},h=function(a){a=e[a];return!a?$.Deferred().reject().promise():l(a)},l=g({},function(a){var g=j()+a;var c=d["js/"+a];c?a="?v="+c:(StackExchange.debug.log("no cache breaker for "+a),a="");return k(g+a)}),o=g({},function(a){function g(){(c=StackExchange[a])?n(a).done(function(){d.resolve()}):0<e?(e--,StackExchange.debug.log("retrying "+a),setTimeout(g,20)):(StackExchange.debug.log("object "+a+" not available although file was loaded"),d.reject())}var d=$.Deferred(),c=StackExchange[a],e=3;c?d.resolve():h(a).done(g).fail(d.reject);return d.promise()}),p=$.Deferred(),q=function(a,g,d,c){if(!d&&!p.isResolved())p.done(function(){q(a,g)});else{if(d)for(var f in e)e.hasOwnProperty(f)&&(e[f]=e[f].replace(/^(full(?:-anon)?).js$/,"$1"+(c||"")+
".js"));c=o(a);d?p.resolve():c=$.when(c,StackExchange.initialized);c.done(function(){g()}).fail(function(){StackExchange.debug.log("failed to provide object "+a)});return c}};q.setCacheBreakers=function(a){for(var g in a)a.hasOwnProperty(g)&&(d[g]=a[g])};StackExchange.using=q;StackExchange.ifUsing=function(g,d,e){if("undefined"!==typeof e){if(c["u_"+e])return;c["u_"+e]=!0}StackExchange[g]?d():((e=a[g])||(e=a[g]=[]),e.push(d))};StackExchange.loadJsFile=function(a){return k(j()+a)}})();String.prototype.format=function(){var e=this.toString();if(!arguments.length)return e;var a="string"==typeof arguments[0]?arguments:arguments[0],c;for(c in a)e=e.replace(RegExp("\\{"+c+"\\}","gi"),a[c]);return e};String.prototype.truncate=function(e,a){var c=this.toString();e&&c.length>e&&(c=c.substr(0,e)+a);return c};String.prototype.splitOnLast=function(e){e=this.lastIndexOf(e);return 0>e?[this]:[this.substr(0,e),this.substr(e)]};String.prototype.contains=function(e){return-1<this.indexOf(e)};StackExchange.init.createJqueryExtensions=function(){var e=StackExchange.helpers;$.extend($.expr[":"],{working:function(a){a=$(a).data("working");return"undefined"!==typeof a&&a},data:function(a,c,e){c=e[3];a=$(a).data(c);switch(typeof a){case "undefined":return!1;case "boolean":return a;case "object":return null!==a}return!0}});$.fn.extend({working:function(a){return this.each(function(){$(this).data("working",a)})},track:function(){return this.each(function(){var a=$(this),c=a.is("a[href]")?a:a.find("a[href]"),e=a.data("tracker");c.each(function(){var a=this.href.splitOnLast("#"),g=a[0];this.href=g+=(g.contains("?")?"&":"?")+e+(a[1]||"")})})},fadeOutAndRemove:function(){return this.each(function(){var a=$(this);a.fadeOut("fast",function(){a.trigger("removing").remove()})})},charCounter:function(a){return this.each(function(){var c=a.target?$(a.target):$(this).parents("form").find("span.text-counter"),f=this;$(this).bind("blur focus keyup paste",e.DelayedReaction(function(){var d=a.min,g=a.max,e=a.setIsValid||function(){},j=f.value?f.value.replace(/\r\n/g,"\n").length:0,k=j>0.8*g?"supernova":j>0.6*g?"hot":j>0.4*g?"warm":"cool",h="";0==j?(h="enter at least "+d+" characters",e(!1)):j<d?(h=d-j+" more to go...",e(!1)):(h=g-j+" character"+(1!=g-j?"s":"")+" left",e(j<=g));c.text(h);c.hasClass(k)||c.removeClass("supernova hot warm cool").addClass(k)},100,{sliding:!0}).trigger)})},selectRange:function(a,c){return this.each(function(){if(this.setSelectionRange)this.focus(),this.setSelectionRange(a,c);else if(this.createTextRange){var e=this.createTextRange();e.collapse(!0);e.moveEnd("character",c);e.moveStart("character",a);e.select()}})},addSpinner:function(a){return this.each(function(){e.addSpinner(this,a)})},addSpinnerAfter:function(a){return this.each(function(){$(this).after(e.getSpinnerImg(a))})},removeSpinner:function(){return this.each(function(){$(this).find("img.ajax-loader").remove()})},showErrorPopup:function(a,c,f){return this.each(function(){e.showErrorPopup(this,a,c,f)})},center:function(){var a=this.parent();"static"===a.css("position")&&(a=a.offsetParent());var a=a.offset(),e=$(window);this.css("position","absolute");this.css("top",(e.height()-this.height())/2+e.scrollTop()-a.top+"px");this.css("left",(e.width()-this.width())/2+e.scrollLeft()-a.left+"px");return this},helpOverlay:function(){e.bindHelpOverlayEvents(this);return this},hideHelpOverlay:function(){e.hideHelpOverlay(this);return this},enable:function(){0==arguments.length||arguments[0]?this.removeAttr("disabled").css("cursor","pointer").removeClass("disabled-button"):this.attr("disabled","disabled").css("cursor","default").addClass("disabled-button");return this},disable:function(){return this.enable(!1)},loadPopup:function(a){var c=this;c.addSpinnerAfter({padding:"0 3px"});$.ajax({type:"GET",url:a.url,dataType:"html",success:function(e){var d=$(e);d.find(".popup-actions-cancel, .popup-close a").click(function(){d.fadeOutAndRemove();a.lightbox&&$("#lightbox").fadeOutAndRemove()});d.find("input:radio[disabled=disabled] + label.action-label").addClass("action-disabled");a.hideDescriptions&&d.find("ul.action-list > li:not(.action-selected) .action-desc").hide();e=d.find("input:radio:not(.action-subform input)");e.closest("li").bind("hide-action",function(){var g=$(this),d=".action-subform"+(a.hideDescriptions?", .action-desc":"");g.removeClass("action-selected").find(d).slideUp("fast")}).bind("show-action",function(){var g=$(this);g.hasClass("action-selected")||(g.siblings(".action-selected").trigger("hide-action"),g.addClass("action-selected").find(".action-subform").slideDown("fast",function(){a.subformShow&&a.subformShow($(this));if(a.subformFocusInput){var g=$(this).find("input[type=text], textarea").not(".actual-edit-overlay").eq(0);g.length&&g.focus()}}),a.hideDescriptions&&g.find(".action-desc").slideDown("fast"),a.actionSelected&&a.actionSelected(g),d.find(".popup-submit").enable())});e.click(function(){$(this).closest("li").trigger("show-action")});d.appendTo(c.parent());a.loaded&&a.loaded(d);e=function(){};if(a.subformShow){var g=d.find("li.action-selected .action-subform");0<g.length&&(e=function(){g.each(function(){a.subformShow($(this))})})}if(a.lightbox){var n=$('<div id="lightbox"/>').appendTo($("body")).css("height",$(document).height()).fadeIn("fast");d.css("z-index",n.css("z-index")+1)}a.dontCenter||d.center().fadeIn("fast",e)},error:function(){c.parent().showErrorPopup("Unable to load popup - please try again")},complete:e.removeSpinner});return c}})};StackExchange.helpers=function(){function e(a,d,e){for(var c=0;c<e.length;c++){var h=e[c];try{if(/\*/.test(h))for(var l=0;4>l;l++){var o=h.replace(/\*/g,f[l]),p=a.css(o);d.css(o,p)}else d.css(h,a.css(h))}catch(q){}}}function a(a,d,c,f){if(a.is(":visible")){var h=$.browser.msie?0:0.4;c()?(a.css("opacity",h+(f?0.2:0)),a.addClass("edit-field-overlayed"),c=a.prev(".actual-edit-overlay"),0==c.length&&(f=a.parent().find("span.edit-field-overlay").text(),c=a.width(),h=a.height(),c=a.clone().prop("className","actual-edit-overlay").attr("name",null).attr("id",null).attr("disabled","disabled").css({position:"absolute",backgroundColor:"white",color:"black","-webkit-text-fill-color":"black",opacity:1,width:c,height:h}),c.is("textarea,input")?(c.val(f),e(d,c,["line-height"])):c.text(f).css("line-height",h+"px").prepend("&nbsp;"),e(d,c,["font-family","font-size","text-align"]),e(a,c,["border-*-style","border-*-color","border-*-width"]),a.css({zIndex:1,position:"relative"}),c.insertBefore(a),f=a.offset().top-
c.offset().top,0!=f&&(d=parseInt(c.css("margin-top")),f=d+f,a.is("textarea")||(f=parseInt(c.prevAll(":visible").eq(0).css("margin-bottom"))+d),c.css("margin-top",f)),a=a.offset().left-c.offset().left,0!=a&&(d=parseInt(c.css("margin-left")),c.css("margin-left",d+a)))):a.css("opacity",1).css("filter","").removeClass("edit-field-overlayed")}}function c(a,d){$(a).find("input[type='submit']").prop("disabled",d)}var f=["left","right","top","bottom"],d={genericBindOverlayEvents:function(g,c,e){StackExchange.options.isMobile||c.bind("keydown contextmenu",function(){d.hideHelpOverlay(g)}).focus(function(){a(g,c,e,!0)}).blur(function(){a(g,c,e)}).each(function(){a(g,c,e)})},bindHelpOverlayEvents:function(a){a.each(function(){var a=$(this);d.genericBindOverlayEvents(a,a,function(){return""===a.val()})})},hideHelpOverlay:function(a){a.css("opacity",1);a.css("filter","");a.removeClass("edit-field-overlayed")},onClickDraftSave:function(a){$(a).click(function(){var a=this.href;StackExchange.cardiologist.ensureDraftSaved(function(){window.onbeforeunload=null;window.location.href=a});return!1});return!0},showErrorPopup:function(a,d,c,e){$(".error-notification").remove();var f=$('<div class="error-notification supernovabg"><h2>'+d+"</h2>"+(c?"":'<span class="error-close">(click on this box to dismiss)</span>')+"</div>"),l=function(){f.fadeOutAndRemove();e&&e()};$(a).append(f);f.click(l).fadeIn("fast");setTimeout(l,c?Math.max(2500,40*d.length):3E4)},removeErrorPopup:function(){$(".error-notification").fadeOutAndRemove()},addSpinner:function(a,c){$(a).append(d.getSpinnerImg(c))},getSpinnerImg:function(a){var d=$('<img class="ajax-loader" src="/content/img/progress-dots.gif" title="loading..." alt="loading..." />');a&&d.css(a);return d},removeSpinner:function(){$("img.ajax-loader").remove()},enableSubmitButton:function(a){c(a,!1)},disableSubmitButton:function(a){c(a,!0)},loadTicks:function(a){var d;d=a?a.find(".edit-block"):$(".edit-block");0==d.find("input[name=i1l]").length&&!d.data("loading-ticks")&&(d.data("loading-ticks",!0),$.ajax({url:"/questions/ticks",cache:!1,success:function(a){d.append("<input type='hidden' name='i1l' value='"+
a+"' />")},complete:function(){d.data("loading-ticks",!1)}}))},showFancyOverlay:function(a){var a=a||{},d=$("#overlay-header"),c=a.message||"",e=$.browser.msie?{background:"#fff",opacity:0}:{};!1!==a.showClose&&(c+='<br><a class="close-overlay">close this message</a>');d.html(c).css(e).animate({opacity:"1",height:"show"},"slow",a.complete).find(".close-overlay").click(function(){d.animate({opacity:"0",height:"hide"},"fast")})},DelayedReaction:function(a,d,c){var c=c||{},e,f,l=c.always,o=function(){e=null;a.apply(null,f)};return{trigger:function(){f=arguments;l&&l.apply(null,f);e?c.sliding&&(clearTimeout(e),e=setTimeout(o,d)):e=setTimeout(o,d)},cancel:function(){e&&(clearTimeout(e),e=null)}}},fireAndForget:function(a){$.ajax({type:"POST",url:a,async:!0})}};return d}();function prepareEditor(e){var a=e.postfix||"",c=function(){setTimeout(function(){StackExchange.editor.initIfShown(e)},1)};if(e.onDemand){for(var f="bold-button,italic-button,spacer1,link-button,quote-button,code-button,image-button,spacer2,olist-button,ulist-button,heading-button,hr-button,spacer3,undo-button,redo-button".split(","),d=$('<ul id="wmd-button-row'+a+'" class="wmd-button-row" />').appendTo(".wmd-button-bar"),g=0,n=0;n<f.length;n++){var j=f[n],k=/spacer/.test(j),j=$("<li id='wmd-"+j+a+
"' />").prop("className","wmd-"+(k?"spacer":"button")).css("left",25*n).appendTo(d);$("<span />").css("background-position",g+"px -20px").appendTo(j);k||(g-=20)}var h=!1;$("#wmd-input, #title, #tagnames, #edit-comment, #m-address, #display-name").one("focus click keydown",function(){h||(h=!0,d.addSpinner({"float":"right"}),StackExchange.using("editor",function(){d.remove();e.autoShowMarkdownHelp&&(e.immediatelyShowMarkdownHelp=!0);c()}))})}else StackExchange.using("editor",c)}
StackExchange.switchMobile=function(e,a){$.post("/mobile/"+e,{returnurl:a},function(a){window.location=a})};jQuery.cookie=function(e,a,c){if("undefined"!=typeof a){c=c||{};null===a&&(a="",c.expires=-1);var f="";if(c.expires&&("number"==typeof c.expires||c.expires.toUTCString))"number"==typeof c.expires?(f=new Date,f.setTime(f.getTime()+864E5*c.expires)):f=c.expires,f="; expires="+f.toUTCString();var d=c.path?"; path="+c.path:"",g=c.domain?"; domain="+c.domain:"",c=c.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(a),f,d,g,c].join("")}else{a=null;if(document.cookie&&""!=document.cookie){c=document.cookie.split(";");for(f=0;f<c.length;f++)if(d=jQuery.trim(c[f]),d.substring(0,e.length+1)==e+"="){a=decodeURIComponent(d.substring(e.length+1));break}}return a}};jQuery.expr[":"].regex=function(e,a,c){var a=c[3].split(","),f=/^(data|css):/,c=a[0].match(f)?a[0].split(":")[0]:"attr",f=a.shift().replace(f,"");return RegExp(a.join("").replace(/^\s+|\s+$/g,""),"ig").test(jQuery(e)[c](f))};$.extend($.expr[":"],{containsExact:function(e,a,c){return $.trim(e.innerHTML.toLowerCase())===c[3].toLowerCase()},containsExactCase:function(e,a,c){return $.trim(e.innerHTML)===c[3]},containsRegex:function(e,a,c){a=/^\/((?:\\\/|[^\/])+)\/([mig]{0,3})$/.exec(c[3]);return RegExp(a[1],a[2]).test($.trim(e.innerHTML))}});$.extend({URLEncode:function(e){for(var a="",c=0,e=e.toString(),f=/(^[a-zA-Z0-9_.]*)/;c<e.length;){var d=f.exec(e.substr(c));null!=d&&1<d.length&&""!=d[1]?(a+=d[1],c+=d[1].length):(" "==e[c]?a+="+":(d=e.charCodeAt(c).toString(16),a+="%"+(2>d.length?"0":"")+d.toUpperCase()),c++)}return a},URLDecode:function(e){for(var a,c=/(%[^%]{2})/;null!=(m=c.exec(e))&&1<m.length&&""!=m[1];)b=parseInt(m[1].substr(1),16),a=String.fromCharCode(b),e=e.replace(m[1],a);return e}});(function(e){e.fn.typeWatch=function(a){function c(a){if("TEXT"==a.type.toUpperCase()||"TEXTAREA"==a.nodeName.toUpperCase()){var c={timer:null,text:e(a).val().toUpperCase(),cb:f.callback,el:a,wait:f.wait};f.highlight&&e(a).focus(function(){this.select()});var n=function(a){var d=c.wait,h=!1;13==a.keyCode&&"TEXT"==this.type.toUpperCase()&&(d=1,h=!0);clearTimeout(c.timer);c.timer=setTimeout(function(){var a=h,d=e(c.el).val();if(d.length>f.captureLength&&d.toUpperCase()!=c.text||a&&d.length>f.captureLength)c.text=d.toUpperCase(),c.cb(d)},d)};e(a).keydown(n).bind("paste",null,function(a){a.which||n(this)})}}var f=e.extend({wait:750,callback:function(){},highlight:!0,captureLength:2},a);return this.each(function(){c(this)})}})(jQuery);(function(e){function a(a){var d;return a&&a.constructor==Array&&3==a.length?a:(d=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))?[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]:(d=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))?[2.55*parseFloat(d[1]),2.55*parseFloat(d[2]),2.55*parseFloat(d[3])]:(d=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))?[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]:(d=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))?[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(a)?c.transparent:c[e.trim(a).toLowerCase()]}e.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,color,outlineColor".split(","),function(c,d){e.fx.step[d]=function(c){if(!c.colorInit){var f;f=c.elem;var j=d,k;do{k=e.curCSS(f,j);if(""!=k&&"transparent"!=k||e.nodeName(f,"body"))break;j="backgroundColor"}while(f=f.parentNode);f=a(k);c.start=f;c.end=a(c.end);c.colorInit=!0}c.elem.style[d]="rgb("+[Math.max(Math.min(parseInt(c.pos*(c.end[0]-c.start[0])+c.start[0]),255),0),Math.max(Math.min(parseInt(c.pos*(c.end[1]-c.start[1])+c.start[1]),255),0),Math.max(Math.min(parseInt(c.pos*(c.end[2]-c.start[2])+c.start[2]),255),0)].join()+")"}});var c={transparent:[255,255,255]}})(jQuery);</script> <script type="text/javascript">StackExchange.ready(function () {

            StackExchange.question.init({showAnswerHelp:true,totalCommentCount:0,shownCommentCount:0,highlightColor:'#F4A83D',backgroundColor:'#FFF',questionId:4687615});

            styleCode();

                StackExchange.realtime.subscribeToQuestion('1', '4687615');
        });
    </script> <script type="text/javascript">StackExchange.init({"stackAuthUrl":"https://stackauth.com","serverTime":1340897092,"styleCode":true,"enableUserHovercards":true,"site":{"name":"Stack Overflow","description":"Q&A for professional and enthusiast programmers","isNoticesTabEnabled":true,"newTitleSearchBoxEnabled":false},"user":{"isAnonymous":true,"fkey":"db585294a1f4622a25e474b1c9a22136","notificationsUnviewedCount":0,"inboxUnviewedCount":-1}});
        StackExchange.using.setCacheBreakers({"js/prettify-full.js":"d1cd9a23171c","js/moderator.js":"8c49fc268737","js/full-anon.js":"8577eab04b42","js/full.js":"8b5c6902e968","js/wmd.js":"eb1157179598","js/third-party/jquery.autocomplete.min.js":"e5f01e97f7c3","js/mobile.js":"6eb68240242f","js/help.js":"fc9fb0517db2","js/tageditor.js":"c1ba807b32aa","js/tageditornew.js":"bd66fabe1c71","js/inline-tag-editing.js":"be882e188985","js/revisions.js":"8c6bcd93b7fe","js/suggested-edits.js":"9ac06a566813","js/probes.js":"beb933322ff0"});
        
    </script><script type="text/javascript">StackExchange.ready(function() {
        initTagRenderer("".split(" "), "".split(" "));
         
        prepareEditor({
            heartbeatType: 'answer',
            bindNavPrevention: true,
            postfix: "",
            onDemand: true,
            discardSelector: ".discard-answer"
            ,immediatelyShowMarkdownHelp:true
        });
        
    });  
</script><script type="text/javascript">StackExchange.ready(function(){$.get('/posts/4687615/ivc/8724');});
</script> <script language="javascript"><!--
bmi_SafeAddOnload(bmi_load,"bmi_orig_img",0);//-->
</script></body></html>